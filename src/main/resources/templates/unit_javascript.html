<!DOCTYPE html>
<html>
    <head>
        <title>Unit Javascript</title>
        <style>
            table {
                border-collapse: collapse; /* Ensures only one border line */
                border: 1px solid gray;    /* Single blue border */
                width: 60%;               /* Optional: full width */
                }

                tr, td {
                border: 1px solid gray;    /* Blue borders for cells */
                padding: 8px;              /* Some spacing inside cells */
                text-align: left;          /* Align text nicely */
                }
        </style>
    </head>
    <body>
        <h1>2.5</h1>
        <script>
            function isSymmetric(){
                let a_string = document.getElementById('txtString').value;
                // Remove spaces and convert to lowercase for comparison
                str = a_string.replace(/\s+/g, '').toLowerCase();
                // Reverse the string
                const reversed = str.split('').reverse().join('');
                document.getElementById('div_result').textContent = str === reversed;
            }
        </script>
        <table width="50%" cellpadding="10">
            <tr>
                <td>Input a string</td>
                <td><input type="text" id="txtString"/></td>
            </tr>
            <tr>
                <td><input type="button" onclick="isSymmetric();" value="Calculate"/></td>
                <td><div id="div_result"></div></td>
            </tr>
        </table>

        <h1>2.6</h1>
        <script>
            function calculateHypotenuse(){
                let line_1 = document.getElementById('txt_line_1').value;
                let line_2 = document.getElementById('txt_line_2').value;
                document.getElementById('div_result_2').textContent = Math.sqrt(line_1 * line_1 + line_2 * line_2);
            }
        </script>
        <table width="50%" cellpadding="10">
            <tr>
                <td>Line 1</td>
                <td><input type="text" id="txt_line_1"/></td>
            </tr>
            <tr>
                <td>Line 2</td>
                <td><input type="text" id="txt_line_2"/></td>
            </tr>
            <tr>
                <td><input type="button" onclick="calculateHypotenuse();" value="Calculate"/></td>
                <td><div id="div_result_2"></div></td>
            </tr>
        </table>

        <h1>2.7</h1>
        <script>
            function exchangeCurrency(){
                let usd = document.getElementById('txt_usd').value;
                document.getElementById('div_result_3').textContent = usd * 23300;
            }
        </script>
        <table width="50%" cellpadding="10">
            <tr>
                <td>USD</td>
                <td><input type="text" id="txt_usd"/></td>
            </tr>
            <tr>
                <td><input type="button" onclick="exchangeCurrency();" value="Exchange"/></td>
                <td><div id="div_result_3"></div></td>
            </tr>
        </table>

        <h1>2.8</h1>
        <script>
            function validateNameAndPassword(name, password) {
                // Validate Name: at least 6 chars and contains at least one number
                if (name.length < 6) return false;
                
                let hasNumber = false;
                for (let i = 0; i < name.length; i++) {
                    if (name[i] >= '0' && name[i] <= '9') {
                    hasNumber = true;
                    break;
                    }
                }
                if (!hasNumber) return false;

                // Validate Password: at least 8 chars, no spaces, contains letter, number, and sign
                if (password.length < 8) return false;
                
                let hasLetter = false;
                let hasDigit = false;
                let hasSign = false;

                for (let i = 0; i < password.length; i++) {
                    let ch = password[i];

                    if (ch === ' ') return false; // no spaces

                    if ((ch >= 'a' && ch <= 'z') || (ch >= 'A' && ch <= 'Z')) {
                        hasLetter = true;
                    } else if (ch >= '0' && ch <= '9') {
                        hasDigit = true;
                    } else {
                        hasSign = true; // anything else is considered a sign
                    }
                }

                return hasLetter && hasDigit && hasSign;
            }

            function validateInput(){
                let name = document.getElementById('txt_name').value;
                let password = document.getElementById('txt_password').value;
                let isValid = validateNameAndPassword(name, password);
                document.getElementById('div_result_4').textContent = isValid?'The input is valid':'The input is invalid';
            }
        </script>
        <table width="50%" cellpadding="10">
            <tr>
                <td>Name</td>
                <td><input type="text" id="txt_name"/></td>
            </tr>
            <tr>
                <td>Password</td>
                <td><input type="password" id="txt_password"/></td>
            </tr>
            <tr>
                <td><input type="button" onclick="validateInput();" value="Validate"/></td>
                <td><div id="div_result_4"></div></td>
            </tr>
        </table>

        <h1>2.9</h1>
        <table width="50%" cellpadding="10">
            <tr>
                <td>Name</td>
                <td><input type="text" id="txtName"/></td>
            </tr>
            <tr>
                <td>Role</td>
                <td>
                    <select id="selRole">
                        <option value="Manager">Manager</option>
                        <option value="Leader">Leader</option>
                        <option value="Developer">Developer</option>
                    </select>
                </td>
            </tr>
            <tr>
                <td>Base salary</td>
                <td><input type="text" id="txtBaseSalary" placeholder="Input base salary"/></td>
            </tr>
            <tr>
                <td></td>
                <td><input type="button" onclick="beginCalculation();" value="Calculate"/></td>
            </tr>
        </table>

        <script>
                class Employee {
                    constructor(name, role, baseSalary) {
                        this.name = name;
                        this.role = role;
                        this.baseSalary = baseSalary;
                    }

                    calculateSalary(){
                        switch (this.role){
                            case "Manager":
                                return this.baseSalary * 3;
                            case "Leader":
                                return this.baseSalary * 1.6;
                            case "Developer":
                                return this.baseSalary;
                        }
                           

                    }
                }
                function beginCalculation(){
                    var name = document.getElementById("txtName").value;
                    var baseSalary = document.getElementById("txtBaseSalary").value;
                    var role = document.getElementById("selRole").value;
                    const emp1 = new Employee(name, role, baseSalary);
                    alert(emp1.calculateSalary())
                }
                
        </script>

        <h1>2.10</h1>
        <style>
            table.products {
                width: 80%;
                border-collapse: collapse;    /* ensures single outer border */
                border: 1px solid #000;       /* black single line */
                table-layout: fixed;
            }

            /* Remove inner cell borders, keep spacing inside cells */
            .products td {
                border: none;
                padding: var(--gap);
                vertical-align: top;
            }

            /* Product card inside each cell */
            .product {
                display: flex;
                flex-direction: column;
                gap: 8px;
                padding: var(--card-padding);
                height: 100%;
            }

            .product img {
                width: 100%;
                height: var(--img-height);
                object-fit: cover;
                border-radius: 6px;
                background: #eee;
                display: block;
            }

            .title {
                font-weight: 700;
                font-size: 1rem;
                margin: 0;
                color: #111;
            }

            .desc {
                margin: 0;
                font-size: 0.9rem;
                color: #444;
                line-height: 1.3;
            }
        </style>
        <script>
            function addNewRow(title, description, image_link) {
                const table = document.getElementById("tbl_products");
                const newRow = table.insertRow(); // Appends a new row

                const cell1 = newRow.insertCell(0);
                const cell2 = newRow.insertCell(1);
                const cell3 = newRow.insertCell(2);

                cell1.textContent = title;
                cell2.textContent = description;
                cell3.innerHTML = '<img width="200" src="'+image_link+'"/>';
            }

            function fetchResult(){
                const xhr = new XMLHttpRequest();
                xhr.open("GET", "https://dummyjson.com/products", true);
                // When the request is loaded
                xhr.onload = function () {
                    if (xhr.status === 200) {
                        // Parse the JSON string into a JS object
                        const data = JSON.parse(xhr.responseText);
                        
                        //todo: Display the values
                        data.products.forEach(product => {
                            addNewRow(product['title'], product['description'], product['images'][0]);
                        });
                    };
                }
                // Handle network errors
                xhr.onerror = function () {
                    alert('There is an error when getting data');
                };
                // Send the request
                xhr.send();
            }
        </script>
        <div><input type="button" value="Get data" onclick="fetchResult();"/></div>
        <div class="wrap">
            <table cellpadding="10" id="tbl_products">
            </table>
        </div>
        <script>
            
        </script>
    </body>
</html>